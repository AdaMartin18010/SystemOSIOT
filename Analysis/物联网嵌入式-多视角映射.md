# 物联网与嵌入式：OS × vSphere/VMware × 容器 × 图灵机 多视角映射

## 1. 概述

- 主题：边缘计算、网关、协议栈（MQTT/CoAP）、实时性与能耗。

## 2. OS 视角

- RTOS/Linux、调度/中断延迟、设备驱动、功耗治理。

## 3. vSphere/VMware 视角

- 边缘侧虚拟化（如 vSphere Edge/分支）、集中化管理与模板化部署、NSX 边界安全。

## 4. 容器视角

- 轻量容器/跨架构镜像（多平台）、网关容器化、设备透传、远程管理与 OTA。

## 5. 图灵机视角

- 可计算性完备，但受硬件/能耗与实时性约束，需工程折中。

## 6. 多维映射（摘要）

| 维度 | OS | vSphere/VMware | 容器 | 备注 |
|---|---|---|---|---|
| 实时 | RT 调度 | 资源保留 | RT 容器 | 延迟上界 |
| 能耗 | 频率治理 | 集中编排 | 轻量镜像 | 远程唤醒 |
| 供应链 | 驱动/固件 | 模板化 | SBOM/签名 | OTA 校验 |
| 证据编号 | E-2025-0702 | E-2025-0701 | E-2025-0401 | 对应 9 |

## 7. 建议

- 边缘节点分层管理：VM 保隔离，容器保敏捷；统一 OTA 与SBOM 验证。
- 实时保障：
  - OS：PREEMPT_RT/IRQ 亲和、隔离核；
  - vSphere：关键 VM 资源保留与固定亲和，迁移窗口隔离；
  - 容器：rt runtime、CPUSET/IRQ 亲和、设备 cgroup 约束。

### 7.1 统一时间线回放示例（E-2025-0301/0303/0304）

1) 事件钉扎：T0 触发边缘节点负载突增或策略变更，记录 vCenter/边缘事件与时钟偏移（PTP/NTP）。
2) 指标采集：
   - 实时延迟：`rt_task_latency_seconds{node="edge-1"}` p99；
   - 能耗：`node_power_watts` 与 `cpu_frequency_hz`；
   - 网络：MQTT publish/ack 延迟直方图。
3) 日志与追踪：Loki 过滤 `{app="gateway", device_id="..."} |~ "(deadline miss|ota|disconnect)"`；Tempo 追踪 OTA/消息路径。
4) 回放：对齐 [T0-Δ, T1+Δ]，输出“RT 延迟/能耗/消息延迟”三联图；给出合规与运维建议并引用证据键。

## 8. 相关目录链接

## 9. 参考与链接

- vSphere Edge/分支与 NSX 边界能力（E-2025-0701）
- 容器供应链安全与签名/OTA（E-2025-0401）
- RT 与低功耗治理（E-2025-0702）

- `03-iot-embedded/` 总览与各子章节
- `07-container-microservices/`（轻量容器/供应链）
- `08-network-systems/`（边缘网络与安全）
