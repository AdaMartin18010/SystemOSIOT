# 2.5.2 结构表

## 概述

操作系统结构表通过表格形式展示操作系统的核心概念、组件关系、算法流程和性能指标，为系统分析和设计提供结构化的参考。

## 1. 操作系统层次结构表

### 1.1 系统层次表

| 层次 | 名称 | 功能 | 组件 | 接口 |
|------|------|------|------|------|
| 7 | 应用层 | 用户应用程序 | 应用程序、用户界面 | 系统调用API |
| 6 | 表示层 | 数据格式转换 | 编码解码、压缩解压 | 库函数接口 |
| 5 | 会话层 | 会话管理 | 会话控制、同步 | 进程间通信 |
| 4 | 传输层 | 数据传输 | 网络协议栈 | Socket接口 |
| 3 | 网络层 | 网络通信 | 网络设备驱动 | 网络接口 |
| 2 | 数据链路层 | 数据链路控制 | 设备驱动 | 设备接口 |
| 1 | 物理层 | 硬件抽象 | 硬件抽象层 | 硬件接口 |
| 0 | 硬件层 | 物理硬件 | CPU、内存、I/O设备 | 硬件总线 |

### 1.2 内核结构表

| 组件 | 功能 | 接口 | 依赖关系 | 性能指标 |
|------|------|------|----------|----------|
| 进程管理 | 进程创建、调度、终止 | 系统调用 | 内存管理 | 响应时间 |
| 内存管理 | 内存分配、回收、保护 | 页表接口 | 硬件MMU | 内存利用率 |
| 文件系统 | 文件操作、目录管理 | VFS接口 | 设备管理 | I/O吞吐量 |
| 设备管理 | 设备驱动、I/O控制 | 设备接口 | 中断处理 | 设备利用率 |
| 网络管理 | 网络协议、套接字 | 网络接口 | 设备管理 | 网络带宽 |
| 安全机制 | 身份认证、访问控制 | 安全接口 | 所有组件 | 安全级别 |

## 2. 进程管理结构表

### 2.1 进程状态转换表

| 当前状态 | 事件 | 下一状态 | 操作 | 条件 |
|----------|------|----------|------|------|
| New | 调度器选择 | Ready | 加入就绪队列 | 资源可用 |
| Ready | CPU分配 | Running | 加载上下文 | CPU空闲 |
| Running | 时间片用完 | Ready | 保存上下文 | 时间片到期 |
| Running | I/O请求 | Blocked | 保存上下文 | I/O操作 |
| Running | 进程完成 | Terminated | 释放资源 | 程序结束 |
| Blocked | I/O完成 | Ready | 加入就绪队列 | I/O完成 |
| Blocked | 信号到达 | Ready | 处理信号 | 信号处理 |

### 2.2 调度算法比较表

| 算法 | 类型 | 公平性 | 效率 | 复杂度 | 适用场景 |
|------|------|--------|------|--------|----------|
| FCFS | 非抢占 | 低 | 低 | O(1) | 批处理 |
| SJF | 非抢占 | 低 | 高 | O(n) | 批处理 |
| SRTF | 抢占 | 低 | 最高 | O(n) | 实时系统 |
| RR | 抢占 | 高 | 中等 | O(1) | 分时系统 |
| 优先级 | 抢占/非抢占 | 低 | 中等 | O(n) | 实时系统 |
| 多级队列 | 混合 | 中等 | 高 | O(log n) | 通用系统 |
| 多级反馈 | 混合 | 高 | 高 | O(log n) | 通用系统 |

### 2.3 进程控制块结构表

| 字段 | 类型 | 大小 | 用途 | 更新频率 |
|------|------|------|------|----------|
| PID | 整数 | 4字节 | 进程标识 | 创建时 |
| 状态 | 枚举 | 1字节 | 进程状态 | 状态变化时 |
| 优先级 | 整数 | 4字节 | 调度优先级 | 动态调整 |
| 程序计数器 | 指针 | 8字节 | 下一条指令 | 每次执行 |
| 寄存器 | 数组 | 64字节 | CPU寄存器 | 上下文切换 |
| 内存指针 | 指针 | 8字节 | 内存管理 | 内存分配 |
| 文件描述符 | 数组 | 256字节 | 打开文件 | 文件操作 |
| 父进程 | 指针 | 8字节 | 进程关系 | 创建时 |

## 3. 内存管理结构表

### 3.1 内存分配算法表

| 算法 | 策略 | 优点 | 缺点 | 时间复杂度 |
|------|------|------|------|------------|
| 首次适应 | 找到第一个足够大的块 | 简单快速 | 外部碎片 | O(n) |
| 最佳适应 | 找到最小的足够大的块 | 碎片最小 | 查找慢 | O(n) |
| 最坏适应 | 找到最大的块 | 减少碎片 | 大块稀缺 | O(n) |
| 伙伴系统 | 二分分割 | 快速合并 | 内部碎片 | O(log n) |
| 分离存储 | 按大小分类 | 查找快速 | 空间开销 | O(1) |

### 3.2 页面置换算法表

| 算法 | 策略 | 页面错误率 | 实现复杂度 | 开销 |
|------|------|------------|------------|------|
| FIFO | 先进先出 | 高 | 简单 | 低 |
| LRU | 最近最少使用 | 低 | 复杂 | 高 |
| Clock | 时钟算法 | 中等 | 中等 | 中等 |
| LFU | 最少使用 | 低 | 复杂 | 高 |
| OPT | 最优算法 | 最低 | 不可实现 | - |

### 3.3 虚拟内存结构表

| 组件 | 功能 | 大小 | 访问方式 | 性能影响 |
|------|------|------|----------|----------|
| 页表 | 地址映射 | 可变 | 硬件访问 | 高 |
| TLB | 地址缓存 | 64-512项 | 硬件访问 | 中等 |
| 页面帧 | 物理内存 | 4KB | 直接访问 | 低 |
| 交换区 | 磁盘存储 | 可变 | 系统调用 | 高 |
| 页面缓存 | 磁盘缓存 | 可变 | 系统调用 | 中等 |

## 4. 文件系统结构表

### 4.1 文件系统类型表

| 类型 | 特点 | 优点 | 缺点 | 适用场景 |
|------|------|------|------|----------|
| FAT | 简单 | 兼容性好 | 碎片多 | 移动设备 |
| NTFS | 功能丰富 | 安全性高 | 复杂 | Windows |
| ext4 | 高性能 | 可靠性高 | 复杂 | Linux |
| HFS+ | 苹果专用 | 优化好 | 封闭 | macOS |
| ZFS | 高级功能 | 数据完整性 | 资源消耗 | 服务器 |

### 4.2 文件操作表

| 操作 | 系统调用 | 参数 | 返回值 | 错误处理 |
|------|----------|------|--------|----------|
| 创建 | open() | 路径、模式 | 文件描述符 | ENOENT |
| 读取 | read() | 描述符、缓冲区、大小 | 字节数 | EIO |
| 写入 | write() | 描述符、缓冲区、大小 | 字节数 | ENOSPC |
| 关闭 | close() | 文件描述符 | 0/-1 | EBADF |
| 删除 | unlink() | 路径 | 0/-1 | EACCES |
| 重命名 | rename() | 旧路径、新路径 | 0/-1 | ENOENT |

### 4.3 目录结构表

| 级别 | 名称 | 内容 | 权限 | 大小限制 |
|------|------|------|------|----------|
| 根目录 | / | 系统目录 | 755 | 无限制 |
| 系统目录 | /bin, /sbin | 系统程序 | 755 | 无限制 |
| 用户目录 | /home | 用户文件 | 755 | 配额限制 |
| 临时目录 | /tmp | 临时文件 | 1777 | 磁盘空间 |
| 设备目录 | /dev | 设备文件 | 755 | 无限制 |
| 配置目录 | /etc | 配置文件 | 755 | 无限制 |

## 5. 设备管理结构表

### 5.1 设备分类表

| 类别 | 特点 | 访问方式 | 驱动类型 | 示例 |
|------|------|----------|----------|------|
| 字符设备 | 流式访问 | 顺序访问 | 字符驱动 | 键盘、鼠标 |
| 块设备 | 随机访问 | 块访问 | 块驱动 | 硬盘、U盘 |
| 网络设备 | 网络通信 | 套接字 | 网络驱动 | 网卡、调制解调器 |
| 显示设备 | 图形输出 | 帧缓冲 | 显示驱动 | 显卡、显示器 |
| 音频设备 | 音频处理 | 流式访问 | 音频驱动 | 声卡、麦克风 |

### 5.2 中断处理表

| 中断类型 | 优先级 | 处理方式 | 响应时间 | 处理时间 |
|----------|--------|----------|----------|----------|
| 硬件中断 | 高 | 立即处理 | <1μs | 10-100μs |
| 软件中断 | 中 | 调度处理 | 1-10μs | 1-10ms |
| 系统调用 | 低 | 用户态处理 | 10-100μs | 1-100ms |
| 异常 | 最高 | 立即处理 | <1μs | 1-10μs |
| 陷阱 | 高 | 立即处理 | <1μs | 1-10μs |

### 5.3 I/O调度算法表

| 算法 | 策略 | 优点 | 缺点 | 适用场景 |
|------|------|------|------|----------|
| 先来先服务 | 按请求顺序 | 公平简单 | 效率低 | 简单系统 |
| 最短寻道时间 | 选择最近磁道 | 效率高 | 饥饿问题 | 磁盘系统 |
| 电梯算法 | 单向扫描 | 效率高 | 延迟高 | 磁盘系统 |
| 完全公平 | 时间片分配 | 公平性好 | 复杂 | 多用户系统 |
| 截止时间 | 按截止时间 | 实时性好 | 复杂 | 实时系统 |

## 6. 网络管理结构表

### 6.1 网络协议栈表

| 层 | 协议 | 功能 | 数据单位 | 地址类型 |
|----|------|------|----------|----------|
| 应用层 | HTTP, FTP, SMTP | 应用服务 | 消息 | 域名 |
| 传输层 | TCP, UDP | 端到端通信 | 段 | 端口号 |
| 网络层 | IP, ICMP | 路由转发 | 包 | IP地址 |
| 数据链路层 | Ethernet, WiFi | 帧传输 | 帧 | MAC地址 |
| 物理层 | 电缆, 光纤 | 比特传输 | 比特 | 无 |

### 6.2 套接字类型表

| 类型 | 协议 | 特点 | 可靠性 | 应用场景 |
|------|------|------|--------|----------|
| SOCK_STREAM | TCP | 面向连接 | 高 | Web, FTP |
| SOCK_DGRAM | UDP | 无连接 | 低 | 视频流, DNS |
| SOCK_RAW | 直接访问 | 原始套接字 | 无 | 网络工具 |
| SOCK_SEQPACKET | SCTP | 有序数据包 | 高 | 实时通信 |

### 6.3 网络接口表

| 接口类型 | 速度 | 距离 | 成本 | 应用 |
|----------|------|------|------|------|
| 以太网 | 10M-100G | 100m-40km | 低 | 局域网 |
| WiFi | 11M-10G | 10-100m | 中等 | 无线网络 |
| 光纤 | 1G-400G | 1-100km | 高 | 广域网 |
| 蓝牙 | 1-50M | 1-100m | 低 | 短距离通信 |
| 蜂窝网络 | 100K-1G | 1-50km | 高 | 移动通信 |

## 7. 安全机制结构表

### 7.1 访问控制表

| 模型 | 策略 | 灵活性 | 安全性 | 复杂度 |
|------|------|--------|--------|--------|
| DAC | 用户控制 | 高 | 低 | 低 |
| MAC | 系统控制 | 低 | 高 | 高 |
| RBAC | 角色控制 | 中等 | 中等 | 中等 |
| ABAC | 属性控制 | 高 | 高 | 高 |

### 7.2 安全级别表

| 级别 | 名称 | 要求 | 保护措施 | 应用场景 |
|------|------|------|----------|----------|
| A1 | 验证设计 | 形式化验证 | 数学证明 | 军事系统 |
| B3 | 安全域 | 强制访问控制 | 安全内核 | 政府系统 |
| B2 | 结构化保护 | 自主访问控制 | 安全标签 | 企业系统 |
| B1 | 标记安全 | 访问控制 | 安全标签 | 商业系统 |
| C2 | 受控访问 | 自主访问控制 | 审计日志 | 个人系统 |
| C1 | 自主保护 | 基本访问控制 | 用户认证 | 简单系统 |
| D | 最小保护 | 无要求 | 无 | 测试系统 |

### 7.3 加密算法表

| 算法 | 类型 | 密钥长度 | 安全性 | 性能 |
|------|------|----------|--------|------|
| AES | 对称 | 128/192/256位 | 高 | 高 |
| RSA | 非对称 | 2048位 | 高 | 低 |
| ECC | 非对称 | 256位 | 高 | 中等 |
| SHA-256 | 哈希 | 256位 | 高 | 高 |
| MD5 | 哈希 | 128位 | 低 | 高 |

## 8. 性能监控结构表

### 8.1 性能指标表

| 指标 | 定义 | 单位 | 目标值 | 监控方法 |
|------|------|------|--------|----------|
| CPU利用率 | CPU使用时间/总时间 | % | <80% | 系统调用 |
| 内存利用率 | 已用内存/总内存 | % | <90% | 内存管理 |
| 磁盘I/O | 读写操作数/秒 | IOPS | 根据硬件 | 设备驱动 |
| 网络带宽 | 数据传输量/秒 | Mbps | 根据网络 | 网络接口 |
| 响应时间 | 请求到响应时间 | ms | <100ms | 应用监控 |

### 8.2 监控工具表

| 工具 | 功能 | 监控范围 | 输出格式 | 使用场景 |
|------|------|----------|----------|----------|
| top | 进程监控 | 系统级 | 文本 | 实时监控 |
| htop | 增强进程监控 | 系统级 | 文本 | 交互式监控 |
| iostat | I/O统计 | 磁盘级 | 文本 | 磁盘分析 |
| netstat | 网络统计 | 网络级 | 文本 | 网络分析 |
| vmstat | 虚拟内存 | 内存级 | 文本 | 内存分析 |
| sar | 系统活动 | 综合 | 文本 | 历史分析 |

### 8.3 性能优化表

| 优化目标 | 方法 | 工具 | 效果 | 风险 |
|----------|------|------|------|------|
| CPU优化 | 进程调度 | nice, renice | 提高响应性 | 低 |
| 内存优化 | 内存管理 | malloc, free | 减少碎片 | 中等 |
| 磁盘优化 | I/O调度 | iostat, iotop | 提高吞吐量 | 低 |
| 网络优化 | 协议调优 | netstat, ss | 减少延迟 | 低 |
| 应用优化 | 代码优化 | profiler | 提高效率 | 中等 |
